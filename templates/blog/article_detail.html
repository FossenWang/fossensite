{% extends 'base.html' %} {% load blog_tags %} {% load cache %}

{% block title %}
{% cache 86400 article_detail_title pk %}
<title>{{ article.title }} | Fossen的博客</title>
{% endcache %}
{% endblock title %}

{% block css %}
<link href="https://cdn.bootcss.com/jqueryui/1.12.1/jquery-ui.css" rel="stylesheet">
<link href="https://cdn.bootcss.com/highlight.js/9.12.0/styles/tomorrow.min.css" rel="stylesheet">
{% endblock css %}

{% block script %}
<script src="https://cdn.bootcss.com/jqueryui/1.12.1/jquery-ui.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script src="/static/blog/js/article_detail.js"></script>
{% endblock script %}

{% block main %}
{% cache 86400 article_detail pk %}
<div class="container">
    <div class="row">
        <div class="col-lg-8">
            <div class="white-board article-detail">
                <div class="breadcrumb-nav">
                    <a href="/">首页</a> &gt;
                    <a href="{% url 'blog:category' 1 %}">文章</a> &gt;
                    <a href="{% url 'blog:category' article.category.id %}">
                        {{ article.category }}
                    </a>
                </div>
                <article>
                    {% if article.cover %}
                    <div class="cover">
                        <img src="{{ article.cover.url }}">
                    </div>
                    {% endif %}
                    <h1 class="title">{{ article.title }}</h1>
                    <div class="meta">
                        {{ article.pub_date }}&emsp;{{ article.views }} 阅读&emsp;分类:&nbsp;
                        <a href="{% url 'blog:category' article.category.id %}">
                            {{ article.category }}
                        </a>&emsp;话题:&nbsp;{% for topic in article.topics.all %}
                        <a href="{% url 'blog:topic' topic.id %}">{{ topic.name }}</a>&nbsp;{% endfor %}
                    </div>
                    <div class="content">
                        {{ article.content|safe }}
                    </div>
                </article>
                <div id='comment' data-url="{% url 'blog:article_comment' article.id %}">
                </div>
            </div>
        </div>
        <div class="col-lg-4">
            <div class="white-board widget">
                <h6 class="widget-title">分类</h6>
                <ul class="category-widget">
                    <li>
                        <a href="{% url 'blog:category' 0 %}">
                            全部文章
                        </a>
                    </li>
                    {% get_article_category_names as categories %}
                    {% for cate in categories %}
                    <li>
                        <a href="{% url 'blog:category' cate.id %}">
                            {{ cate.name }}
                        </a>
                    </li>
                    {% endfor %}
                </ul>
            </div>
        </div>
    </div>
</div>
{% endcache %}
{% endblock main %}